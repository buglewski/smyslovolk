{% extends 'base.html' %}

{% block title %}Логин{% endblock %}

{% block content %}

<div>
    <div class="mb-4">
      <label class="form-label" for="username">
        Логин
      </label>
      <input class="form-control" id="username" name="username" type="text" required>
    </div>
    <div class="mb-4">
      <label class="form-label" for="name">
        Имя
      </label>
      <input class="form-control" id="name" name="name" type="text" required>
    </div>
    <div class="mb-4">
      <label class="form-label" for="email">
        Email
      </label>
      <input class="form-control" id="email" name="email" type="text" required>
    </div>
    <div class="mb-6">
      <label class="form-label" for="password">
        Пароль
      </label>
      <input class="form-control" id="password" name="password" type="password" required>
    </div>
    <div class="flex items-center justify-between">
      <button id="register">
        Register
      </button>
    </div>
</div>

<script>
  const reg = document.getElementById("register");
  reg.onclick = async function AAA() {
    const request = new Request(url + "register/", {
      method: 'POST', 
      headers: { 
        'Content-type': 'application/json'
      }, 
      body: JSON.stringify({
        "username": document.getElementById("username").value,
        "name": document.getElementById("name").value,
        "email": document.getElementById("email").value,
        "password": document.getElementById("password").value
      })
    });
    console.log(request);
    let response = await fetch(request);
    if (response.ok) {
      window.location.href = '/';
    } else {
      console.log("ERROR!");
      return 1;
    } 
  }
</script>
{% endblock %}
